#!/bin/bash
# TEXT MAIL
# Author: Alex wang Email:qq5910225@gmail.com

export LANG=en_US.UTF-8

location='机房'

PRINTSERV="echo -en ${location} $NOTIFY_HOSTALIAS $NOTIFY_SERVICEDESC is $NOTIFY_SERVICESTATE\nIP: $NOTIFY_HOSTADDRESS\nDate: $NOTIFY_SHORTDATETIME\nMessage: $NOTIFY_SERVICEOUTPUT\n$NOTIFY_LONGSERVICEOUTPUT\n"

PRINTHOST="echo -en ${location} $NOTIFY_HOSTALIAS is $NOTIFY_HOSTSTATE\nIP:$NOTIFY_HOSTADDRESS\nDate: $NOTIFY_SHORTDATETIME\nMessage: $NOTIFY_HOSTOUTPUT\n"

#echo "NOTIFY_WHAT:$NOTIFY_WHAT" 
#echo "NOTIFY_NOTIFICATIONCOMMENT:${NOTIFY_NOTIFICATIONCOMMENT}" 

if [ "$NOTIFY_WHAT" == "SERVICE" ]; then
# For Service notification
        ${PRINTSERV} |mutt -s "${location} $NOTIFY_HOSTALIAS/$NOTIFY_SERVICEDESC is $NOTIFY_SERVICESTATE" $NOTIFY_CONTACTEMAIL 
# For Host notification
else
        ${PRINTHOST} |mutt -s "${location} $NOTIFY_HOSTALIAS/$NOTIFY_NOTIFICATIONTYPE $NOTIFY_HOSTNAME is $NOTIFY_HOSTSTATE" $NOTIFY_CONTACTEMAIL
fi
